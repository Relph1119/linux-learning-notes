# 《穿越操作系统迷雾》学习笔记

## 本书介绍

本书从计算机的软硬件开始讲起，从电路设计到机器语言、汇编语言、C语言的知识介绍，之后开始从0到1实现操作系统，并详细介绍引导区、内存管理、进程、中断和异常、进程调度、系统调用、进程间通信、图形输出等内容。

## 阅读体会

本书的前5章主要讲解计算机软硬件基础和原理，对于已经学过408的我，这一块的知识点还是很熟悉的，尤其是学习过电子信息课程。

对于本书的第6章开始就是重头戏了，真正从0到1实现操作系统，在阅读过程中，王柏生老师给了我很大的帮助，尤其是在代码解释和系统调试方面，再次感谢王老师。

- 第6章：主要介绍了实模式和保护模式、内核映像的设计，开始真正从实模式（16位）到保护模式（32位）的跳转，完成第一次操作系统内核的跳跃。
- 第7章：主要介绍了64位的引导设计，完成内存映像的虚拟地址到物理地址的映射，建立从一级到四级的页表映射，完整构建页表管理，并从保护模式跳转到内核64位模式。
- 第8章：主要讲解了内存管理，设计E820的结构体，并实现`print`打印函数，完成页面管理，实现页面划分、分配页面和归还页面的功能，并进行两阶段的物理内存映射，对更细粒度的内存块进行管理。
- 第9章：主要介绍了进程任务的实现，设计任务的结构体，建立进程地址映射，创建进程任务状态段及内核栈，并通过伪造中断现场，进入用户空间。
- 第10章：主要讲解了中断的主要机制，初始化8259A，实现中断描述符表，设置中断寄存器，并实现时钟中断，并解决缺页异常的情况。
- 第11章：主要介绍了进程调度，当没有就绪任务需要运行时，让处理器运行空闲任务，通过模拟应用程序App1和App2，实现任务切换功能，主要保存当前任务内核态的上下文和恢复即将投入运行任务的内核态的上下文。
- 第12章：主要讲解了系统调用的工作机制，并实现了第一个系统调用`do_sleep`，控制应用程序每隔1秒打印一次。
- 第13章：主要介绍了使用共享内存方式完成进程间通信。
- 第14章：主要讲解了显示及键盘输入，根据图形处理器的原理，基于`framebuffer`存储区域实现文本和图形的展示；实现键盘中断处理程序，完成键盘输入功能。

## 本书勘误

勘误地址：https://book.douban.com/subject/36560814/discussion/637560822/