# 第8回 重新设置中断描述符表与全局描述符表

## 8.1 前情回顾

- 配置全局描述符表和中断描述符表。
- 打开A20地址线，突破20位寻址。
- 更改CR0寄存器，从实模式切换到保护模式。
- 跳转到内存地址0处开始执行代码。

## 8.2 

```nasm
_pg_dir:
startup_32:
	movl $0x10,%eax
	mov %ax,%ds
	mov %ax,%es
	mov %ax,%fs
	mov %ax,%gs
	lss _stack_start,%esp
``` 

上述代码解析：
- `_pg_dir`表示页目录，之后在设置分页机制时，页目录会存放在这里，也会覆盖这里的代码。
- 将DS、ES、FS、GS寄存器都赋值为`0x10`，这些值都指向全局描述符表中的第二个段描述符，即数据段描述符。
- `lss`指令表示让栈顶指针指向`_stack_start`标号处。

